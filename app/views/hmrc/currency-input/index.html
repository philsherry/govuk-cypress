{% extends "layout.html" %}

{% block pageTitle %}
{{ components.hmrc.component[6].name }} -
{{ components.hmrc.heading }} -
{{ serviceName }}
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <header class="hmrc-page-heading">
      <h1 class="govuk-heading-xl">{{ components.hmrc.component[6].name }}</h1>
      <p class="govuk-caption-xl hmrc-caption-xl"><span class="govuk-visually-hidden">This section is </span>{{ components.hmrc.heading }}</p>
    </header>
  </div>
</div>

<div class="govuk-grid-row main-section">
  {% include "includes/skip-links.html" %}

  <div class="govuk-grid-column-one-third">
    <nav aria-label="In-page">
      <h2 class="govuk-heading-m">In-page navigation</h2>
      <h3 class="govuk-heading-s" id="in-page-navigation__components">Components</h3>
      <ol class="govuk-list" role="list" aria-describedby="in-page-navigation__components">
        <li><a class="govuk-link" href="#component-1">{{ components.hmrc.component[6].example[0].heading }}</a></li>
      </ol>
      <h3 class="govuk-heading-s" id="in-page-navigation__cypress">Cypress tests</h3>
      <ol class="govuk-list" role="list" aria-describedby="in-page-navigation__cypress">
        <li><a class="govuk-link" href="#cypress-1">{{components.cypress.env[0].heading}}</a></li>
        <li><a class="govuk-link" href="#cypress-2">{{components.cypress.env[1].heading}}</a></li>
        <li><a class="govuk-link" href="#cypress-3">{{components.cypress.env[2].heading}}</a></li>
      </ol>
    </nav>
    {% include "includes/nav-hmrc.html" %}
  </div>

  <div id="component-section" class="govuk-grid-column-two-thirds component-section">
    <p class="govuk-body">{{ components.hmrc.component[6].body }}</p>

    <div class="component-section" id="component-1">
      <h2 class="govuk-heading-m">
        {{ components.hmrc.component[6].example[0].heading }}
      </h2>

      <div class="component-section__example" role="region" aria-label="Component example: {{ components.hmrc.component[6].example[0].heading }}">
        {{ govukInput({
          id: "currency",
          name: "currency",
          label: {
            text: "How much does your employer pay towards this?",
            isPageHeading: false
          },
          hint: {
            text: "For example, £600 or £193.54."
          },
          prefix: {
            text: "£"
          },
          classes: "govuk-input--width-10",
          spellcheck: false
        }) }}

        {{ govukButton({
          text: "Continue"
        }) }}
      </div>

      <footer class="component-section__footer">
        {{ govukDetails({
          summaryText: "What we are testing in this component",
          html: "<ul class='govuk-list govuk-list--bullet'>
            <li>Make sure the Change and Remove links have unique, hidden context for screen reader users.</li>
            <li>The hint text must be associated correctly with the checkboxes.</li>
            <li>The focus colours must be the updated version.</li>
          </ul>"
        }) }}
      </footer>
    </div>

  </div>

  <div id="cypress-section" class="govuk-grid-column-two-thirds cypress-section">

    <h2 class="govuk-heading-l">Cypress tests</h2>
<pre>
  <code class="language-javascript hljs">
  it("checks all visible elements are present and visible", () => {
    cy.get("@component").should("be.visible");
    cy.get("@componentLabel").should("be.visible");
    cy.get("@componentHint").should("be.visible");
    cy.get("@componentInputWrapper").should("be.visible");
    cy.get("@componentInputPrefix").should("be.visible");
    cy.get("@componentInput").should("be.visible");
  });
  </code>
</pre>

<pre>
  <code class="language-javascript hljs">
  it("checks any hidden elements are hidden but present", () => {
    cy.get("@componentInput").should("have.attr", "aria-describedby");
  });
  </code>
</pre>

<pre>
  <code class="language-javascript hljs">
    // it checks the hint is associated with the input
  </code>
</pre>

<pre>
  <code class="language-javascript hljs">
  it("checks the focus colours are correct", () => {
    state = 'label';
    cy.get("@componentLabel")
      .click()
      .wait(1000)
    cy.screenshot(`${service}--${component}--${viewport}--${state}`, {
      capture: "viewport",
    });

    state = "focus";
    cy.get("@componentInput")
      .focus()
      .wait(2500)
      .focused()
      .should("have.css", "border-color", "rgb(11, 12, 12)")
      .should("have.css", "border-width", "2px")
      .should("have.css", "outline-color", "rgb(255, 221, 0)")
      .should("have.css", "outline-width", "3px")
      .type("13.37")
      .wait(250)
    cy.screenshot(`${service}--${component}--${viewport}--${state}`, {
      capture: "viewport",
    });
  });
  </code>
</pre>

<pre>
  <code class="language-javascript hljs">
  it("runs axe against the component", () => {
    cy.get("@component").checkA11y(null, null, terminalLog, {
      skipFailures: true,
    });
  });
  </code>
</pre>

    <h2 class="govuk-heading-l">Output</h2>



    <h3 class="govuk-heading-m">Desktop</h3>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/desktop.js/homepage--desktop--currency-input--default.png" alt="Screenshot of the default state of the currency input component." />
      <figcaption class="hmrc-figure__caption">Default state of the currency input component.</figcaption>
    </figure>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/desktop.js/homepage--desktop--currency-input--focus.png" alt="Screenshot of the focus state of the currency input component, with input." />
      <figcaption class="hmrc-figure__caption">Focus state of the currency input component, showing the focus ring colours.</figcaption>
    </figure>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/desktop.js/homepage--desktop--currency-input--label.png" alt="Screenshot of the focus state of the currency input component." />
      <figcaption class="hmrc-figure__caption">Focus state of the currency input component, triggered by clicking the label to check it is associated with the input
      field.</figcaption>
    </figure>

    <h3 class="govuk-heading-m">Tablet</h3>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/tablet.js/homepage--tablet--currency-input--default.png" alt="Screenshot of the default state of the currency input component." />
      <figcaption class="hmrc-figure__caption">Default state of the currency input component.</figcaption>
    </figure>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/tablet.js/homepage--tablet--currency-input--focus.png" alt="Screenshot of the focus state of the currency input component, with input." />
      <figcaption class="hmrc-figure__caption">Focus state of the currency input component, showing the focus ring colours.</figcaption>
    </figure>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/tablet.js/homepage--tablet--currency-input--label.png" alt="Screenshot of the focus state of the currency input component." />
      <figcaption class="hmrc-figure__caption">Focus state of the currency input component, triggered by clicking the label to check it is associated with the input
      field.</figcaption>
    </figure>


    <h3 class="govuk-heading-m">Mobile</h3>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/mobile.js/homepage--mobile--currency-input--default.png" alt="Screenshot of the default state of the currency input component." />
      <figcaption class="hmrc-figure__caption">Default state of the currency input component.</figcaption>
    </figure>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/mobile.js/homepage--mobile--currency-input--focus.png" alt="Screenshot of the focus state of the currency input component, with input." />
      <figcaption class="hmrc-figure__caption">Focus state of the currency input component, showing the focus ring colours.</figcaption>
    </figure>

    <figure class="hmrc-figure">
      <img class="hmrc-figure__image" src="/public/images/hmrc/currency-input/mobile.js/homepage--mobile--currency-input--label.png" alt="Screenshot of the focus state of the currency input component." />
      <figcaption class="hmrc-figure__caption">Focus state of the currency input component, triggered by clicking the label to check it is associated with the input
      field.</figcaption>
    </figure>

  </div>

</div>

{% endblock %}
